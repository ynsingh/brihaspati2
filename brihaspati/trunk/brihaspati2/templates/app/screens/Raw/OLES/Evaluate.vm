#*
 * @(#) Evaluate.vm
  * Copyright (c) 2010 DEI Agra, 2013 IITK.
 * All Rights Reserved.
 * @author <a href="mailto:noopur.here@gmail.com ">Nupur Dixit</a>
 * @author <a href="mailto:jaivirpal@gmail.com ">Jaivir Singh</a>
 * Contributors: Members of MHRD Project DEI Agra
*#

$page.setTitle("quiz Evaluation")
$page.setBgColor("bgcolor")

<head>
<link rel="stylesheet" type="text/css" href="$content.getURI("/scrpts/htmlarea.css")" media="screen"/>
</head>

## If some message has been set, that is retrieved and displayed.
<font face="$ui.sansSerifFonts">
	$!data.getMessage()
</font>
#set($lang = $data.getUser().getTemp("lang" ).toString())
#set($cnm = $data.getUser().getTemp("course_name" ).toString())
<table bgcolor="$ui.menuColor" width=100%>
        <tr><td><b>
		<font face="$ui.sansSerifFonts">
                <a href=$link.setPage("Index.vm")>$brih_home</a> |
                <a href=$link.setPage("call,CourseMgmt_User,CourseHome.vm")>$cnm</a> |
                <a href=$link.setPage("call,OLES,Oles_QB.vm").addPathInfo("count","1")> $online_online $brih_examat $brih_system</a>|
                #if($!type == "result")
                	$brih_result
                #else
					$brih_evaluate
				#end
        </b>
        </td>
        </tr>
</table>
## Creating the links for help regarding FAQ 
<table width="100%">
	<tr>
		<td align=right>
			<img src="$content.getURI("/images/hand.gif")"><a href=javascript:popupWin("/brihaspati2/docs/Quizstudent.html","newWin");>$brih_help</a>
		</td>
	</tr>
</table>


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<form name="frm" method="post"  enctype="multipart/form-data" action=$link.setPage("call,OLES,Evaluate.vm").setAction("OLES_AttemptQuiz")>
<table width="100%" bgcolor="$ui.tableColor">
	<tr bgcolor="$ui.tableColor">
		#if($tdcolor != "1")
			<td>
		#elseif($tdcolor == "1")
			<td bgcolor="#AFDCEC">
		#end
		<b><I><a href=$link.setPage("call,OLES,Oles_QB.vm").addPathInfo("count","1") style=text-decoration:none>$brih_queBank</I></b></a></td>
		#if($tdcolor != "2")
		        <td>
		#elseif($tdcolor == "2")
			<td bgcolor="#AFDCEC">
		#end
		<b><I><a href=$link.setPage("call,OLES,Oles_Gen.vm").addPathInfo("count","1").addPathInfo("mode","quizSetup") style=text-decoration:none>$brih_generate $brih_exam</I></b></a></td>
		#if($tdcolor != "3")
		        <td>
		#elseif($tdcolor == "3")
			<td bgcolor="#AFDCEC">
		#end
		<b><I><a href=$link.setPage("call,OLES,AnnounceExam_Manage.vm").addPathInfo("count","3") style=text-decoration:none>$brih_QDannounce $brih_exam</I></b></a></td>
		#if($tdcolor != "4")
			<td>
		#elseif($tdcolor == "4")
			<td bgcolor="#AFDCEC">
		#end
		<b><I><a href=$link.setPage("call,OLES,Evaluate.vm").addPathInfo("count","4") style=text-decoration:none>$brih_evaluation</I></b></a></td>
		#if($tdcolor != "5")
			<td>
		#elseif($tdcolor == "5")
	        <td bgcolor="#AFDCEC">
		#end
		<b><I><a href=$link.setPage("call,OLES,Evaluate.vm").addPathInfo("count","5").addPathInfo("type","result") style=text-decoration:none>$brih_result</I></b></a></td>
		#if($tdcolor != "6")
			<td>
		#elseif($tdcolor == "6")
           	<td bgcolor="#AFDCEC>
        #end
        <b><I><a href=$link.setPage("call,OLES,SecurityString.vm").addPathInfo("count","6").addPathInfo("flag","security") style=text-decoration:none>$brith_security</I></b></a></td>
         #if($tdcolor != "7")
			<td>
		#elseif($tdcolor == "7")
           	<td bgcolor="#AFDCEC>
        #end
        <b><I><a href=$link.setPage("call,OLES,OLES_ReEvaluation.vm").addPathInfo("count","7") style=text-decoration:none>$brih_reevaluation</I></b></a></td>
	</tr>
</table>	
<table width="100%" >
	##<tr><td>&nbsp;</td></tr>
	#*<tr bgcolor="$ui.menuColor" >
		<td >
	        <b>$brih_usr $brih_name </b>
        </td>
		<td>
    		<SELECT name=userList>	
    		<option value="1" >Select Student</option>
			#foreach($topic in $userList2)
				#if($!topic.getLoginName()==$!studentLoginName)
					<option value="$!topic.getLoginName()">$!topic.getLoginName()</option>
				#else
					<option value="$!topic.getLoginName()">$!topic.getLoginName()</option>
				#end              			
			#end			
	        </SELECT>
		</td>
	</tr>*#
	<tr bgcolor="$ui.menuColor" >
		<td><b> $brih_quiz $brih_name  </b></td>
		<td>
        	<SELECT name=quizlist>       		
			<option value="1">Select Quiz</option>			
				#foreach($topic in $quizList)
					#if($!topic.getQuizID()==$!quizID)
						<option value="$!topic.getQuizID()">$!topic.getQuizName()</option>
					#else
						<option value="$!topic.getQuizID()">$!topic.getQuizName()</option>
					#end               		 		
				#end			
    		</SELECT>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" class="button-ftextstyle" name="eventSubmit_GetStudent" value="$brih_get" onClick="checkfield(document.frm,this);"/></td>
	</tr>
		#foreach($det in $details)
		<tr>
			<td>$det.studentLoginName</td>
			#if($type=="result")
			<td><a href=$link.setPage("call,OLES,Evaluate.vm").setAction("OLES_AttemptQuiz").addPathInfo("quizID",$det.quizId).addPathInfo("studentLoginName",$det.studentLoginName).addPathInfo("count",$tdcolor).addPathInfo("actionName","eventSubmit_Result") style=text-decoration:none>$brih_result</a></td>
			#else
			<td><a href=$link.setPage("call,OLES,Evaluate.vm").setAction("OLES_AttemptQuiz").addPathInfo("quizId",$det.quizId).addPathInfo("studentLoginName",$det.studentLoginName).addPathInfo("count",$tdcolor).addPathInfo("actionName","eventSubmit_Evaluate") style=text-decoration:none>$brih_evaluate</a></td>
			#end
		</tr>
		#end	
	#*<tr bgcolor="$ui.menuColor" >
		<td colspan="2">
		#if($type=="result")
		<input type="button" class="button-ftextstyle" name="eventSubmit_Result" value="Result" onClick="checkField(document.frm,this);"/>
		#else
		<input type="button" class="button-ftextstyle" name="eventSubmit_Evaluate" value="Evaluate" onClick="checkField(document.frm,this);"/>
		#end 			
		</td>
	</tr>*#    		
	
	
	#if($longtype == false)
	<tr bgcolor="$ui.tableColor" >
		<td align=center colspan=3 >
	        	<input type="button" class="button-ftextstyle" name="eventSubmit_doGrade" value="$brih_submit" onClick="checkField1(document.frm,this);"/>
		<input type="hidden" name="check" value="$flg">
			<input type="hidden" name="long_short" value="$long_short" />
			<input type="reset" name="Reset" class="button-ftextstyle" value="$brih_reset" /> 
			<input type="hidden" name="deleteFileNames" value="">		
			<input type="hidden" name="message" value="">
			<input type="hidden" name="startIndex" value= "$startIndex" >
		</td>
	</tr>
	#end
	<input type="hidden" name="actionName">
	<input type="hidden" name="type" value="$!type">
	<input type="hidden" name="count" value="$!tdcolor">
	#*<input type="hidden" name="quizID">
	<input type="hidden" name="studentLoginName">
	<input type="hidden" name="quizName">
	<input type="hidden" name="type" value="$!type">
	<input type="hidden" name="count" value="$!tdcolor">*#
	</table>
  </div>
</form>
</body>

<SCRIPT LANGUAGE="javascript">
	function popupWin(url,popupName)
        {
                Win1=window.open(url,popupName,"resizable=0,scrollbars=1,height=400,width=400,align=left");
        }
	
	function checkField1(frm,field)
        {
		if( frm.minmarks.value!="") {
			if(isNumberString(frm.minmarks.value))
                       	{
				alert(" Marks should be positive !! ");
                               	frm.noofques.focus();
                               	return false;
			}
			var temp=frm.MaxGrade.value;
			var temp1=frm.minmarks.value;
			if( temp >= temp1 ) {
			      	frm.actionName.value=field.name;
                        	frm.submit();
			}
			else
				alert("Please check the Max Marks and Marks !!");
		}
		else 
			alert("Marks is not Blank ");
        }
	function isNumberString(chString)
        {
                if(chString.length==0)
                        return false;
                var RefString="0123456789";
                for(count=0;count<chString.length;count++)
                {
                        var tempChar=chString.charAt(count);
                        if(RefString.indexOf(tempChar)==-1)
                        {
                                return true;
                        }
                }
                return false;
        }
	

 function checkField(frm,field){
	quizid = frm.quizlist.options[frm.quizlist.selectedIndex].value;
	userid = frm.userList.options[frm.userList.selectedIndex].value;	
	if(userid==1){
		alert("kindly select the Student Name")		
		frm.userList.focus();
		return false;
	}
	else{
		if(quizid ==1){
			alert("kindly select the quiz to Evaluate")
			frm.quizlist.focus();
			return false;
		}
		else{
			frm.quizID.value = frm.quizlist.options[frm.quizlist.selectedIndex].value;
			frm.quizName.value = frm.quizlist.options[frm.quizlist.selectedIndex].text;
			frm.studentLoginName.value = frm.userList.options[frm.userList.selectedIndex].value;				
			frm.actionName.value=field.name;
	       	frm.submit();
		}
	}
}
 	function checkfield(frm,field){
	      	frm.actionName.value=field.name;
               	frm.submit();
	}
</SCRIPT>
