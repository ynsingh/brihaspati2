#*
 * @(#) ViewAss.vm 
 * Copyright (c) 2007,2009 ETRG,IIT Kanpur.
 * All Rights Reserved.
 * @author <a href=" mailto:arvindjss17@gmail.com "> Arvind Pal </a>
 * @author <a href="mailto:shaistashekh@hotmail.com">Shaista</a>
 * Contributors: Members of ETRG, I.I.T. Kanpur
 * @modified date: 04-04-2011 (Shaista)
*#

#set($lang=$data.getUser().getTemp("lang").toString())
$!data.getMessage()
<table bgcolor="$ui.menuColor" width=100% > ##table 1 start
        <tr> 
		<td><b>
			<a href=$link.setPage("call,IndexHome.vm")>$brih_home</a> |
	        	<a href=$link.setPage("call,CourseMgmt_User,CourseHome.vm")> $coursename </a> |
        		<a href=$link.setPage("call,Assignment,ASS_subm.vm").addPathInfo("count","1")> $brih_assignment  </a>| #if($lang == "hindi") $brih_assignment $brih_Of1 $brih_view #else $brih_view $brih_assignment #end </b>
	        	##<a href=$link.setPage("call,Assignment,AssView.vm")> </a> $brih_view $brih_assignment</b>
        	</td>
	</tr>
</table> ##table 1 end
<table width=100% bgcolor="$ui.tableColor">
	<tr>
        #if($user_role == "instructor")
        #if($tdcolor != "1")
        <td>
        #elseif($tdcolor=="1")
        <td bgcolor="#AFDCEC">
        #end
        <a href=$link.setPage("call,Assignment,ASS_subm.vm").addPathInfo("count","1")> #if($lang == "hindi") $brih_assignment $brih_post #else $brih_post $brih_assignment #end </a></td>
        #if($tdcolor != "2")
        <td>
        #elseif($tdcolor=="2")
        <td bgcolor="#AFDCEC">
        #end
        <a href=$link.setPage("call,Assignment,ViewAss.vm").addPathInfo("count","2")>  #if($lang == "hindi") $brih_assignment/$brih_answer $brih_Of1 $brih_view #else $brih_view $brih_assignment/$brih_answer #end </a></td>
        #if($tdcolor != "5")
        <td>
        #elseif($tdcolor=="5")
        <td bgcolor="#AFDCEC">
        #end
        <a href=$link.setPage("call,Assignment,EditDelete.vm").addPathInfo("count","5")> #if($lang == "hindi") $brih_assignment $brih_Of1 $brih_edit/$brih_delete #else  $brih_edit/$brih_delete $brih_assignment #end </a></td>
                <td><img src="$content.getURI("/images/hand.gif")"><a href=javascript:popupWin("/brihaspati2/docs/ViewAss.html","newWin");>$brih_help</a></td>
        #else
                #if($u == "true")
                        #if($tdcolor != "1")
                        <td>
                        #elseif($tdcolor=="1")
                        <td bgcolor="#AFDCEC">
                        #end
                        <a href=$link.setPage("call,Assignment,ViewAss.vm").addPathInfo("count","1")> #if($lang == "hindi") $brih_assignment/$brih_answer  $brih_Of1 $brih_view #else $brih_view $brih_assignment/$brih_answer #end</a></td>
                ##<img border=0  src="$content.getURI("/images/$lang/viewassignment.jpg")"></a></td>
                #if($u1 == true)
                        #if($tdcolor != "2")
                        <td>
                        #elseif($tdcolor=="2")
                        <td bgcolor="#AFDCEC">
                        #end
			<a href=$link.setPage("call,Assignment,PostAns.vm").addPathInfo("count","2")>  #if($lang == "hindi") $brih_answer $brih_post #else $brih_post $brih_answer #end </a></td>
                ##<img border=0  src="$content.getURI("/images/$lang/postAnswer.jpg")"> </a><br></td>
                #end
                #if($u2 == true)
                        #if($tdcolor != "3")
                        <td>
                        #elseif($tdcolor=="3")
                        <td bgcolor="#AFDCEC">
                        #end
                        <a href=$link.setPage("call,Assignment,RePostAns.vm").addPathInfo("count","3")> #if($lang == "hindi") $brih_answer $brih_repost #else $brih_repost $brih_answer #end </a></td>
                ##<img border=0  src="$content.getURI("/images/$lang/repostAnswer.jpg")"></a><br></td>
                #end
                #end
                <td><img src="$content.getURI("/images/hand.gif")"><a href=javascript:popupWin("/brihaspati2/docs/ASS1.html","newWin");>$brih_help</a></td>
        #end
</tr>
</table>
<Form name=uploadform method="post" enctype="multipart/form-data"  action=$link.setPage("call,Assignment,ViewAss.vm").setAction("Assignments")>   
<table width=100% bgcolor="$ui.tableColor">
        <tr>
	## #if($user_role == "instructor")
	#if(($user_role == "instructor")||($user_role == "teacher_assistant"))
	<td><b>$brih_usr #if($lang == "hindi") $brih_Of1 #end $brih_name</b>&nbsp;&nbsp;&nbsp;&nbsp;
	<input type="text" name="GetUser"  size=26 onChange="validate1(this)" /></td>
        #end
        <td><b>$brih_topic  #if($lang == "hindi") $brih_Of1 #end $brih_name</b>
	<SELECT name=topicList>
        <option value="" ></option>
        #foreach($topic in $allTopics)
        <option value="$topic" > $topic </option>
        #end
        </SELECT> &nbsp;
        <input type="button" name="dosubmitView" value="$brih_search" onClick="checkBlank(document.uploadform,this);"/>
        <input type="hidden" name="actionName">
        </td>
	<td>
        	#if($user_role == "instructor")
##                	<img src="$content.getURI("/images/hand.gif")"><a href=javascript:popupWin("/brihaspati2/docs/ViewAss.html","newWin");>$brih_help</a>
 		#end
	</td>
	</tr>
</table>
##<Form name=uploadform method="post" enctype="multipart/form-data"  action=$link.setPage("call,Assignment,ViewAss.vm").setAction("Assignments")>   
<table bgcolor="$ui.tableColor" width="100%">
			#*if($user_role == "instructor")
			<tr bgcolor="$ui.menuColor" >   
			<td colspan=10 >
				<b> $brih_usr  #if($lang == "hindi") $brih_Of1 #end $brih_name</b>
				<input type="text" name="GetUser"  size=26 onChange="validate1(this)"  /> &nbsp; 
			#end
			##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<tr bgcolor="$ui.tableColor"><b> $brih_topic #if($lang == "hindi") $brih_Of1 #end $brih_name </b> &nbsp;
                	##<SELECT name=topicList onFocus=changeTopic(document.uploadform) onChange=changeTopic(document.uploadform)>
                	<SELECT name=topicList>
				<option value="" ></option>
				#foreach($topic in $allTopics)
					<option value="$topic" > $topic </option>
                        	#end
                	</SELECT> &nbsp;
                	<input type="button" name="dosubmitView" value="$brih_search" onClick="checkBlank(document.uploadform,this);"  />
                       	<input type="hidden" name="actionName">
                </td>
        </tr>*#
#if($startpage !=  0 )
	#if($user_role ==  "student") 
	<tr bgcolor="$ui.menuColor">
		<td align="center"> <b> $brih_usr  #if($lang == "hindi") $brih_Of1 #end $brih_name</b> </td>
        	<td align="center">  <b> $brih_assignment  #if($lang == "hindi") $brih_Of1 #end $brih_file  </b> </td>
        	#if($anscheck == "ok")
        	<td align="center">  <b> $brih_answer  #if($lang == "hindi") $brih_Of #end $brih_file  </b> </td>
        	#end
        	#if($studentfilecheck == "ok")
        	<td align="center">  <b> #if($lang == "hindi") $brih_answer $brih_Of1 $brih_view #else $brih_view $brih_answer #end </b> </td>
        	#end
        	#if($datecheck == "ok")
        	<td align="center">  <b> $brih_post #if($lang == "hindi") $brih_Of #end $brih_Da </b> </td>
        	#end
        	<td  align="Center"> <b> $brih_assignment #if($lang == "hindi") $brih_Of #end $brih_Da  </b> </td>
	        <td  align="Center"> <b> $brih_max $brih_marks </b> </td>
        	#if($gradecheck == "ok")
	        <td align="center">  <b> $brih_marks  </b> </td>
        	<td align="center">  <b> $brih_feedback  </b> </td>
		#end
	#end	
	## #if($user_role ==  "instructor")
	#if(($user_role ==  "instructor")||($user_role ==  "teacher_assistant"))
	<tr bgcolor="$ui.menuColor">
		<td align="center"> <b> $brih_usr #if($lang == "hindi") $brih_Of1 #end $brih_name</b> </td>
		<td align="center">  <b> $brih_assignment #if($lang == "hindi") $brih_Of #end $brih_file  </b> </td>
		#if($anscheck == "ok")
		<td align="center">  <b> $brih_answer #if($lang == "hindi") $brih_Of #end $brih_file  </b> </td>
		#end
		#if($studentfilecheck == "ok")
		<td align="center">  <b>  #if($lang == "hindi") $brih_answer $brih_Of1 $brih_view #else $brih_view $brih_answer #end </b> </td>
		#end
		#if($datecheck == "ok")
		<td align="center">  <b> $brih_post #if($lang == "hindi") $brih_Of #end $brih_Da </b> </td>
		#end
		<td  align="Center"> <b> $brih_assignment #if($lang == "hindi") $brih_Of #end $brih_Da  </b> </td>
		<td  align="Center"> <b> $brih_max $brih_marks </b> </td>
		#if($gradecheck == "ok")
		<td align="center">  <b> $brih_marks  </b> </td>
		<td align="center">  <b> $brih_feedback  </b> </td>
		#end
		#if($studentfilecheck == "ok")
                	<td align="center">  <b> $Repo_Permgiv  $brih_marks </b> </td>
                #end

	#end
	</tr>	
	## #if($user_role ==  "instructor")
	#if(($user_role ==  "instructor") || ($user_role == "teacher_assistant"))
	#foreach($e in $Assignmentlist )
	#if($velocityCount%2==0)
	<tr bgcolor="$ui.menuColor">
	#else
	<tr bgcolor="$ui.tableColor">
	#end
		<td width="10%"> $!e.getStudentname()  </td>  ##student name
		<td width="10%">   ##  Assignment file
			<a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getAssignmentfile())","newWin");>$brih_assignment </a>
		</td>
		#if($anscheck == "ok")
		<td width="10%" align="center"> ## Answer file  
			#if($!e.getanswerfile() != "")
			<a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getanswerfile())","newWin");>$brih_answer </a>
			#end
		</td>
		#end
		#if($studentfilecheck == "ok")
		<td width="10%" align="center"> ##Student file
			#if($!e.getStudentfile() != "")
				<a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getStudentfile())","newWin");>$brih_view</a>
			#end
		</td>
		#end
		#if($datecheck == "ok")
  		<td width="20%" align="Center">
			#if( $!e.getDuedate() != "" )
			$!e.getDuedate()  ##postdate
			#end
		</td>
		#end
	
		<td width="10%" align="Center"> $!e.getAssignmentDuedate() </td>  ## Duedate
		<td width="10%" align="Center"> $!e.getmaxgrade() </td> ## max grade
		#if($gradecheck == "ok")
			<td width="10%" align="Center">	
			#if($!e.getgrade() != "")
				$!e.getgrade()  ## given grade
			#end
			</td>
			<td width="10%" align="Center">
			#if($!e.getgrade() != "")
				$!e.getfeedback()
			#end
			</td>
		#end	

		#if($studentfilecheck == "ok")
                        <td width="10%" align="Center">
				#if($!e.getStudentfile() != "")
					<a href=$link.setPage("call,Assignment,PostGrade.vm").addPathInfo("qname",$topicList).addPathInfo("studentsname",$!e.getStudentname())> $brih_marks </a>				
				#end
			</td>	
		#end
	</tr>
        #end
	#end  

	#if($user_role ==  "student")
	#foreach($e in $Assignmentlist)
	#if($velocityCount%2==0)
	<tr bgcolor="$ui.menuColor">
	#else
	<tr bgcolor="$ui.tableColor">
	#end
                <td width="10%" align="Center"> $!e.getStudentname()  </td>  ##student name
                <td width="10%" align="center">   ##  Assignment file
			<a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getAssignmentfile())","newWin");>$brih_assignment </a>
                </td>
                #if($anscheck == "ok")
                <td width="10%" align="center"> ## Answer file
                        #if($!e.getanswerfile() != "")
				<a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getanswerfile())","newWin");>$brih_answer </a>
                        #end
                </td>
                #end
                #if($studentfilecheck == "ok")
                <td width="10%" align="center"> ##Student file
                        #if($!e.getStudentfile() != "")
	                      <a href=javascript:popupWin("$link.setPage("call,ViewFileContent.vm").addPathInfo("view","content").addPathInfo("type","Assignment").addPathInfo("msgid",$str1).addPathInfo("filename",$!e.getStudentfile())","newWin");>$brih_view</a>
                        #end
                </td>
                #end
                #if($datecheck == "ok")
                <td width="20%" align="Center">
                        #if( $!e.getDuedate() != "" )
                        $!e.getDuedate()  ##postdate
                        #end
                </td>
                #end
		<td width="10%" align="Center"> $!e.getAssignmentDuedate() </td>  ## Duedate
                <td width="10%" align="Center"> $!e.getmaxgrade() </td> ## max grade
		#if($gradecheck == "ok")
                        <td width="10%" align="Center">
                        #if($!e.getgrade() != "")
                                $!e.getgrade()  ## given grade
                        #end
                        </td>
                        <td width="10%" align="Center">
                        #if($!e.getgrade() != "")
                                $!e.getfeedback()
                        #end
                        </td>
                #end
        </tr>
	#end
	#end
#end	
</table>
</form>
<script language="javascript">
        
	function popupWin(url,popupName)
        {
                Win1=window.open(url,popupName,"resizable=0,scrollbars=1,height=400,width=400,align=left");
        }

        function checkBlank(uploadform,field)
        {
               	if(uploadform.topicList.value!="" )
               	{
			uploadform.actionName.value=field.name;
			uploadform.submit();
                }
                else{
			alert("Topic Name Can not Empty !! "+uploadform.topicList.value);
		}

        }
	
        function popupWin(urlName,popupName)
        {
                window.open(urlName,popupName,"toolbar=yes,scrollbars=yes");
        }
</script>


